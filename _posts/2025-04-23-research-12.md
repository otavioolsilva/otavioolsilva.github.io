---
title: "DRAFT: Research checkpoint #12: a DDoS attack against a more powerful machine"
date: 2025-04-23 12:00:00 -0300
categories: [Undergraduate Research Project]
tags: [computer-networks, security, IoT, ML]
hidden: true
---

In [post #10](https://otavioolsilva.github.io/posts/research-10/) from this series on my scientific initiation research, I discussed the results of simulating a DDoS attack against a Raspberry Pi 3B, trying to perform the packet sniffing on the live network traffic in the same way we were doing in the last experiments. Also, in the [last post](https://otavioolsilva.github.io/posts/research-11/), I proposed a new step after the sniffing: to register the packets as CSV files, to further use them as a dataset for Machine Learning (ML) models. Advancing these studies, in this post I report a new simple experiment with simulated network traffic and performing an attack against a more powerful machine, trying to generate the CSV from this data to allow us to compare its performance with the Raspberry Pi.

## Simulating network traffic with a more powerful machine

From this set of experiments, the roles of client and server were inverted between the Raspberry and the normal computer. The machines used for this set of experiments, connected in the same local network, are:

- Client:
    * Intel(R) Core(TM) i7-6700K CPU @ 4.00GHz
    * 32GB DDR4 2400 MHz RAM
    * Debian GNU/Linux trixie/sid OS
    * 1000 Mbits/sec network interface card (Gigabit Ethernet)

- Server: Raspberry Pi 3 Model B Plus Rev 1.3
    * Quad Core 1.4GHz Broadcom BCM2837B0 64bit CPU
    * 1GB RAM
    * Raspbian GNU/Linux 10 (buster) OS
    * 1000 Mbits/sec network interface card (Gigabit Ethernet)

The client used this [Bash script](https://github.com/otavioolsilva/ddos-detection-iot-SI/blob/main/studies-and-tests/sniff-to-csv/run-tests.sh) to perform the experiments, five repetitions of each scenario, receiving the traffic from the server and trying to perform the conversion to CSV using the methods without an intermediary PCAP file that we studied in the last post. As the client was reporting the results through SSH, the numbers below may have a little additional volume because of this connection. Also, in addition to [iperf3](https://iperf.fr/), I simulated a DDoS attack using the [netwox](https://ntwox.sourceforge.net/) tool. The traffic was configured to last for 10 seconds in both iperf3 and netwox, with additional time margins in the script to wait for the network to stabilize. The tools to collect the metrics are the same as those used in the last two posts. Below, I discuss each scenario.

### Netwox with conversion to CSV using limited window

Trying to get to the limit of our sniffing script, in this experiment I submitted the most performatic scenario from the CSV generation studies (window of size 10 and buffer with 5000 positions) to the flood traffic generated by netwox.
The metrics collected are:

| Metric                            | Mean     | Standard Deviation | Min      | Max      |
|-----------------------------------|----------|--------------------|----------|----------|
| CPU usage                         | 57.38%   | 7.81%              | 48.0%    | 68.4%    |
| Memory usage                      | 158392KB | 1799.20KB          | 156820KB | 161208KB |
| Duration of execution             | 55.115s  | 2.546s             | 51.872s  | 57.751s  |
| Number of lines in final CSV file | 7326     | 1353.48            | 5835     | 8820     |

Considering that each line of the final CSV file corresponds to 10 packets analysed, the amount of packets processed here is very close to the number registered in post #10 by the duo Pypcap + dpkt, as can be seen in comparison in the graph below (the duration of the attacks are the same). The library used to sniff the packets in this experiment is again Pypcap and the scripts to generate the CSV use dpkt, so the results are expected, but the standard deviation is much more significant.

![Graph with the number of packets processed of post 10 and this one.]({{ '/assets/img/2025-04-23-research-12/packets-netwox.png' | relative_url }}){: .w-75}
_Number of packets processed by the libraries in post 10 compared with the one in our experiment here._

I don't have the exact number of packets produced by the netwox tool, but, empirically, I estimated that it is something around 120.000, so we're still losing a lot of packets, even in a better computer. The metrics of performance, however, are good, with a coherent duration of execution (there was a gap of 10 seconds before and 30 seconds after the traffic) and a controlled CPU usage.

### Iperf3, 25Mbits/s UDP

With limited window of 10 packets (window of size 10 and buffer with 5000 positions):

| Metric                            | Mean      | Standard Deviation | Min      | Max      |
|-----------------------------------|-----------|--------------------|----------|----------|
| CPU usage                         | 25.82%    | 1.58%              | 24.1%    | 27.6%    |
| Memory usage                      | 171639KB  | 211.44KB           | 171412KB | 171968KB |
| Duration of execution             | 37.021s   | 2.83s              | 34.205s  | 40.259s  |
| Number of lines in final CSV file | 2231      | 10.77              | 2212     | 2238     |

With unlimited window (window of size 50000 and buffer with 10 positions):

| Metric                            | Mean       | Standard Deviation | Min       | Max       |
|-----------------------------------|------------|--------------------|-----------|-----------|
| CPU usage                         | 62.72%     | 2.06%              | 59.1%     | 64.0%     |
| Memory usage                      | 272117.6KB | 1042.88KB          | 271064KB  | 273708KB  |
| Duration of execution             | 1m32.05s   | 2.42s              | 1m30.315s | 1m36.215s |
| Number of lines in final CSV file | 2281       | 24.04              | 2249      | 2315      |

Total of packets produced by iperf3: 21584

### Iperf3, unlimited bitrate UDP

With limited window of 10 packets (window of size 10 and buffer with 5000 positions), 292355.2 packets on average reported by iperf3:

| Metric                            | Mean       | Standard Deviation | Min       | Max       |
|-----------------------------------|------------|--------------------|-----------|-----------|
| CPU usage                         | 69.04%     | 3.60%              | 62.6%     | 70.7%     |
| Memory usage                      | 207084KB   | 442.72KB           | 206604KB  | 207700KB  |
| Duration of execution             | 34.30s     | 0.58s              | 33.279s   | 34.708s   |
| Number of lines in final CSV file | 6253       | 492.94             | 5398      | 6592      |

With unlimited window (window of size 50000 and buffer with 10 positions), 292449.2 packets on average reported by iperf3:

| Metric                            | Mean       | Standard Deviation | Min       | Max       |
|-----------------------------------|------------|--------------------|-----------|-----------|
| CPU usage                         | 95.60%     | 0.50%              | 95.3%     | 96.5%     |
| Memory usage                      | 408770.4KB | 1449.26KB          | 407696KB  | 411044KB  |
| Duration of execution             | 4m13.053s  | 1.32s              | 4m11.404s | 4m15.088s |
| Number of lines in final CSV file | 4627       | 85.13              | 4558      | 4767      |

## Next steps

For the next post, I'll work on joining our experiments in packet sniffing with the AI baseline models we studied before, to understand the process of connecting these ends and to do an initial analysis of the performance we can expect from doing both the sniffing and inference together. For now, our current planning is as follows:

- [X] Packet Parsing
    - [X] Conduct experiments to verify the performance of Python libraries sniffing the network and processing the packages in a Raspberry Pi (different from what we did in [post 4](https://otavioolsilva.github.io/posts/research-04/), in which we tested the lib's with the CIC-IoT-2023 dataset and in a regular computer).
    - [X] [NEW] Study mechanisms for generating CSV files from PCAP ones or directly from live network traffic.
- [ ] Inference
    - [X] Run the baseline models proposed in [post 02](https://otavioolsilva.github.io/posts/research-02/) in a Raspberry Pi to verify its performance.
    - [ ] Perform experiments connecting the packet sniffer to the AI baseline models.
- [ ] Training (centralized IDS)
    - TBD.

> This post was made as a record of the progress of the research project "DDoS Detection in the Internet of Things using Machine Learning Methods with Retraining", supervised by professor [Daniel Batista](https://www.ime.usp.br/~batista/), BCC - IME - USP. Project supported by the São Paulo Research Foundation (FAPESP), process nº 2024/10240-3. The opinions, hypothesis and conclusions or recommendations expressed in this material are those of the author and do not necessarily reflect the views of FAPESP.
{: .prompt-info }

